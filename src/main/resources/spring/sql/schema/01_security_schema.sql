CREATE TABLE USERS (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	NAME VARCHAR(30) NOT NULL,
	PASSWORD VARCHAR(30) NOT NULL,
	NOT_EXPIRED BOOLEAN NOT NULL,
	NOT_LOCKED BOOLEAN NOT NULL,
	CREDENTIALS_NOT_EXPIRED BOOLEAN NOT NULL,
	ENABLED BOOLEAN  NOT NULL,
	CONSTRAINT USERS_NAME_UNIQUE UNIQUE (NAME)
);

CREATE TABLE AUTHORITIES (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	ROLE VARCHAR(20) NOT NULL,
	CONSTRAINT AUTHORITIES_ID_ROLE_UNIQUE UNIQUE (ID, ROLE)
);

CREATE TABLE USERS_AUTHORITIES (
	USER_ID INTEGER NOT NULL FOREIGN KEY REFERENCES USERS(ID),
	AUTHORITY_ID INTEGER NOT NULL FOREIGN KEY REFERENCES AUTHORITIES(ID),
	CONSTRAINT USERS_AUTHORITIES_PK PRIMARY KEY (USER_ID, AUTHORITY_ID)
);
